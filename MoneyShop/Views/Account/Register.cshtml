@model MoneyShop.BusinessLogic.Implementation.Account.RegisterModel

@{
    ViewData["Title"] = "Înregistrare - MoneyShop";
    Layout = null;
}

<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>@ViewData["Title"]</title>
    <script src="https://cdn.tailwindcss.com?plugins=forms"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet"/>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: "#1d4ed8",
                        "dark-bg": "#0B1120",
                        "dark-surface": "#131C2E",
                    },
                    fontFamily: {
                        sans: ["Inter", "sans-serif"],
                    },
                },
            },
        };
    </script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .consent-card {
            transition: all 0.2s ease;
        }
        .consent-card:hover {
            border-color: #3b82f6;
        }
        .consent-card.checked {
            background-color: rgba(59, 130, 246, 0.05);
            border-color: #3b82f6;
        }
        .step-active {
            background-color: #1d4ed8;
            color: white;
        }
        .step-complete {
            background-color: #22c55e;
            color: white;
        }
        .step-inactive {
            background-color: #e5e7eb;
            color: #6b7280;
        }
        input[type="checkbox"] {
            accent-color: #1d4ed8;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-slate-50 to-blue-50">
    <!-- Header -->
    <header class="bg-white border-b border-gray-100 shadow-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <a href="/" class="flex items-center gap-2">
                    <img src="~/images/logo.png" alt="MoneyShop" class="h-10" />
                </a>
                <div class="flex items-center gap-4">
                    <span class="text-sm text-gray-500">Ai deja cont?</span>
                    <a href="/Account/Login" class="text-primary font-medium hover:underline">Conectează-te</a>
                </div>
            </div>
        </div>
    </header>

    <main class="py-8 px-4">
        <div class="max-w-3xl mx-auto">
            <!-- Progress Steps -->
            <div class="mb-8">
                <div class="flex items-center justify-center gap-4">
                    <div class="flex items-center gap-2">
                        <div id="step1-indicator" class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium step-active">1</div>
                        <span class="text-sm font-medium text-gray-900">Date personale</span>
                    </div>
                    <div class="w-12 h-px bg-gray-300"></div>
                    <div class="flex items-center gap-2">
                        <div id="step2-indicator" class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium step-inactive">2</div>
                        <span class="text-sm text-gray-500">Consimțăminte</span>
                    </div>
                    <div class="w-12 h-px bg-gray-300"></div>
                    <div class="flex items-center gap-2">
                        <div id="step3-indicator" class="w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium step-inactive">3</div>
                        <span class="text-sm text-gray-500">Finalizare</span>
                    </div>
                </div>
            </div>

            <form asp-action="Register" asp-controller="Account" method="post" id="registerForm">
                <!-- Hidden fields for audit -->
                <input type="hidden" asp-for="IpAddress" id="ipAddress" />
                <input type="hidden" asp-for="UserAgent" id="userAgent" />
                <input type="hidden" asp-for="DeviceHash" id="deviceHash" />
                <input type="hidden" asp-for="ConsentTimestamp" id="consentTimestamp" />

                <!-- Step 1: Personal Data -->
                <div id="step1" class="bg-white rounded-2xl shadow-lg p-8 mb-6">
                    <div class="text-center mb-8">
                        <h1 class="text-2xl font-bold text-gray-900 mb-2">Creează-ți contul MoneyShop</h1>
                        <p class="text-gray-500">Completează datele tale pentru a începe</p>
                    </div>

                    <div asp-validation-summary="ModelOnly" class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6 text-red-700 text-sm"></div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label asp-for="FirstName" class="block text-sm font-medium text-gray-700 mb-2">Prenume *</label>
                            <input asp-for="FirstName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="ex: Ion" required />
                            <span asp-validation-for="FirstName" class="text-red-500 text-sm mt-1"></span>
                        </div>
                        <div>
                            <label asp-for="LastName" class="block text-sm font-medium text-gray-700 mb-2">Nume *</label>
                            <input asp-for="LastName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="ex: Popescu" required />
                            <span asp-validation-for="LastName" class="text-red-500 text-sm mt-1"></span>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label asp-for="Email" class="block text-sm font-medium text-gray-700 mb-2">Adresă email *</label>
                        <input asp-for="Email" type="email" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="email@exemplu.ro" required />
                        <span asp-validation-for="Email" class="text-red-500 text-sm mt-1"></span>
                    </div>

                    <div class="mb-6">
                        <label asp-for="Phone" class="block text-sm font-medium text-gray-700 mb-2">Număr de telefon *</label>
                        <input asp-for="Phone" type="tel" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="+40 7XX XXX XXX" required />
                        <span asp-validation-for="Phone" class="text-red-500 text-sm mt-1"></span>
                        <p class="text-xs text-gray-500 mt-1">Vei primi un cod SMS pentru verificare</p>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                        <div>
                            <label asp-for="Password" class="block text-sm font-medium text-gray-700 mb-2">Parolă *</label>
                            <input asp-for="Password" type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="Minim 8 caractere" required />
                            <span asp-validation-for="Password" class="text-red-500 text-sm mt-1"></span>
                        </div>
                        <div>
                            <label asp-for="ConfirmPassword" class="block text-sm font-medium text-gray-700 mb-2">Confirmă parola *</label>
                            <input asp-for="ConfirmPassword" type="password" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all" placeholder="Repetă parola" required />
                            <span asp-validation-for="ConfirmPassword" class="text-red-500 text-sm mt-1"></span>
                        </div>
                    </div>

                    <div class="flex justify-end">
                        <button type="button" onclick="goToStep(2)" class="bg-primary hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors flex items-center gap-2">
                            Continuă
                            <span class="material-icons-outlined text-lg">arrow_forward</span>
                        </button>
                    </div>
                </div>

                <!-- Step 2: Consents -->
                <div id="step2" class="hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6">
                        <div class="text-center mb-8">
                            <h1 class="text-2xl font-bold text-gray-900 mb-2">Consimțăminte și Mandate</h1>
                            <p class="text-gray-500">Acordă-ne permisiunile necesare pentru a te ajuta</p>
                        </div>

                        <!-- Required Consents -->
                        <div class="mb-8">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                <span class="material-icons-outlined text-red-500">lock</span>
                                Obligatorii
                            </h3>

                            <!-- Terms & Conditions -->
                            <label class="consent-card block border border-gray-200 rounded-xl p-5 mb-4 cursor-pointer" id="card-terms">
                                <div class="flex items-start gap-4">
                                    <input asp-for="AcceptTerms" type="checkbox" class="w-5 h-5 mt-1 rounded" onchange="updateConsentCard('terms')" required />
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium text-gray-900">Termeni și Condiții</span>
                                            <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full">Obligatoriu</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">
                                            Accept Termenii și Condițiile de utilizare a platformei MoneyShop.
                                        </p>
                                        <a href="/Legal/Terms" target="_blank" class="text-primary text-sm hover:underline flex items-center gap-1">
                                            Citește documentul complet
                                            <span class="material-icons-outlined text-sm">open_in_new</span>
                                        </a>
                                    </div>
                                </div>
                            </label>

                            <!-- GDPR -->
                            <label class="consent-card block border border-gray-200 rounded-xl p-5 mb-4 cursor-pointer" id="card-gdpr">
                                <div class="flex items-start gap-4">
                                    <input asp-for="AcceptGdpr" type="checkbox" class="w-5 h-5 mt-1 rounded" onchange="updateConsentCard('gdpr')" required />
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium text-gray-900">Politica de Confidențialitate (GDPR)</span>
                                            <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full">Obligatoriu</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">
                                            Am citit și înțeleg cum sunt prelucrate datele mele personale conform GDPR.
                                        </p>
                                        <a href="/Legal/Privacy" target="_blank" class="text-primary text-sm hover:underline flex items-center gap-1">
                                            Citește politica de confidențialitate
                                            <span class="material-icons-outlined text-sm">open_in_new</span>
                                        </a>
                                    </div>
                                </div>
                            </label>

                            <!-- Costs -->
                            <label class="consent-card block border border-gray-200 rounded-xl p-5 mb-4 cursor-pointer" id="card-costs">
                                <div class="flex items-start gap-4">
                                    <input asp-for="AcceptCosts" type="checkbox" class="w-5 h-5 mt-1 rounded" onchange="updateConsentCard('costs')" required />
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium text-gray-900">Informații Costuri</span>
                                            <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full">Obligatoriu</span>
                                        </div>
                                        <p class="text-sm text-gray-600">
                                            Confirm că am luat la cunoștință că serviciile MoneyShop sunt <strong>gratuite</strong> pentru utilizatori. 
                                            MoneyShop primește comision doar de la instituțiile financiare partenere.
                                        </p>
                                    </div>
                                </div>
                            </label>

                            <!-- ANAF Mandate -->
                            <label class="consent-card block border border-gray-200 rounded-xl p-5 cursor-pointer" id="card-anaf">
                                <div class="flex items-start gap-4">
                                    <input asp-for="MandateAnaf" type="checkbox" class="w-5 h-5 mt-1 rounded" onchange="updateConsentCard('anaf')" required />
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium text-gray-900">Mandat ANAF</span>
                                            <span class="text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full">Obligatoriu</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">
                                            Împuternicesc MoneyShop să interogheze ANAF pentru verificarea veniturilor mele 
                                            în scopul determinării eligibilității pentru credite.
                                        </p>
                                        <div class="bg-blue-50 border border-blue-100 rounded-lg p-3 mt-3">
                                            <div class="flex items-start gap-2">
                                                <span class="material-icons-outlined text-blue-500 text-lg">info</span>
                                                <div class="text-xs text-blue-700">
                                                    <strong>Valabilitate:</strong> 30 de zile de la acordare<br>
                                                    <strong>Scop:</strong> Doar pentru verificarea eligibilității creditului<br>
                                                    <strong>Revocare:</strong> Poți revoca oricând din contul tău
                                                </div>
                                            </div>
                                        </div>
                                        <a href="/Legal/Mandate" target="_blank" class="text-primary text-sm hover:underline flex items-center gap-1 mt-3">
                                            Vezi detalii mandat
                                            <span class="material-icons-outlined text-sm">open_in_new</span>
                                        </a>
                                    </div>
                                </div>
                            </label>
                        </div>

                        <!-- Optional Consents -->
                        <div class="mb-8">
                            <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2">
                                <span class="material-icons-outlined text-gray-400">tune</span>
                                Opționale
                            </h3>

                            <!-- Birou Credit Mandate -->
                            <label class="consent-card block border border-gray-200 rounded-xl p-5 mb-4 cursor-pointer" id="card-birou">
                                <div class="flex items-start gap-4">
                                    <input asp-for="MandateBiroCredit" type="checkbox" class="w-5 h-5 mt-1 rounded" onchange="updateConsentCard('birou')" />
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium text-gray-900">Mandat Biroul de Credit</span>
                                            <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded-full flex items-center gap-1">
                                                <span class="material-icons-outlined text-xs">star</span>
                                                Recomandat
                                            </span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">
                                            Împuternicesc MoneyShop să interogheze Biroul de Credit pentru o analiză 
                                            completă a eligibilității mele.
                                        </p>
                                        <div class="bg-green-50 border border-green-100 rounded-lg p-3 mt-3">
                                            <div class="flex items-center gap-2">
                                                <span class="material-icons-outlined text-green-500">check_circle</span>
                                                <span class="text-xs text-green-700">Oferă o analiză mai precisă și oferte mai bune</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </label>

                            <!-- Share to Broker -->
                            <label class="consent-card block border border-gray-200 rounded-xl p-5 cursor-pointer" id="card-broker">
                                <div class="flex items-start gap-4">
                                    <input asp-for="ShareToBroker" type="checkbox" class="w-5 h-5 mt-1 rounded" onchange="updateConsentCard('broker')" />
                                    <div class="flex-1">
                                        <div class="flex items-center justify-between mb-2">
                                            <span class="font-medium text-gray-900">Transfer date către broker</span>
                                            <span class="text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full">Opțional</span>
                                        </div>
                                        <p class="text-sm text-gray-600 mb-2">
                                            Accept ca datele mele să fie transmise brokerilor parteneri MoneyShop 
                                            pentru a primi oferte personalizate.
                                        </p>
                                        <div class="bg-yellow-50 border border-yellow-100 rounded-lg p-3 mt-3">
                                            <div class="flex items-start gap-2">
                                                <span class="material-icons-outlined text-yellow-600">visibility</span>
                                                <span class="text-xs text-yellow-700">
                                                    Poți controla exact ce date sunt partajate și cui, direct din contul tău.
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </label>
                        </div>

                        <div class="flex justify-between">
                            <button type="button" onclick="goToStep(1)" class="border border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors flex items-center gap-2">
                                <span class="material-icons-outlined text-lg">arrow_back</span>
                                Înapoi
                            </button>
                            <button type="button" onclick="goToStep(3)" id="btnToStep3" class="bg-primary hover:bg-blue-700 text-white px-8 py-3 rounded-lg font-medium transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                                Continuă
                                <span class="material-icons-outlined text-lg">arrow_forward</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Summary & Submit -->
                <div id="step3" class="hidden">
                    <div class="bg-white rounded-2xl shadow-lg p-8 mb-6">
                        <div class="text-center mb-8">
                            <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                                <span class="material-icons-outlined text-green-600 text-3xl">check_circle</span>
                            </div>
                            <h1 class="text-2xl font-bold text-gray-900 mb-2">Verifică și Finalizează</h1>
                            <p class="text-gray-500">Verifică datele înainte de a crea contul</p>
                        </div>

                        <!-- Summary Card -->
                        <div class="bg-gray-50 rounded-xl p-6 mb-6">
                            <h3 class="font-semibold text-gray-900 mb-4">Rezumat date personale</h3>
                            <div class="grid grid-cols-2 gap-4 text-sm">
                                <div>
                                    <span class="text-gray-500">Nume complet:</span>
                                    <p class="font-medium text-gray-900" id="summary-name">-</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Email:</span>
                                    <p class="font-medium text-gray-900" id="summary-email">-</p>
                                </div>
                                <div>
                                    <span class="text-gray-500">Telefon:</span>
                                    <p class="font-medium text-gray-900" id="summary-phone">-</p>
                                </div>
                            </div>
                        </div>

                        <!-- Consents Summary -->
                        <div class="bg-gray-50 rounded-xl p-6 mb-6">
                            <h3 class="font-semibold text-gray-900 mb-4">Consimțăminte acordate</h3>
                            <div class="space-y-3" id="consents-summary">
                                <!-- Will be populated by JS -->
                            </div>
                        </div>

                        <!-- Legal Notice -->
                        <div class="bg-blue-50 border border-blue-100 rounded-xl p-4 mb-6">
                            <div class="flex items-start gap-3">
                                <span class="material-icons-outlined text-blue-500">gavel</span>
                                <div class="text-sm text-blue-800">
                                    <p class="mb-2">
                                        Prin crearea contului, confirm că am peste 18 ani și că toate datele furnizate 
                                        sunt corecte și complete.
                                    </p>
                                    <p>
                                        Înțeleg că mandatele acordate sunt valabile 30 de zile și pot fi revocate 
                                        oricând din contul meu.
                                    </p>
                                </div>
                            </div>
                        </div>

                        <div class="flex justify-between">
                            <button type="button" onclick="goToStep(2)" class="border border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors flex items-center gap-2">
                                <span class="material-icons-outlined text-lg">arrow_back</span>
                                Înapoi
                            </button>
                            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white px-8 py-3 rounded-lg font-medium transition-colors flex items-center gap-2">
                                <span class="material-icons-outlined text-lg">person_add</span>
                                Creează contul
                            </button>
                        </div>
                    </div>
                </div>
            </form>

            <!-- Footer Info -->
            <div class="text-center text-sm text-gray-500 mt-8">
                <p class="flex items-center justify-center gap-2 mb-2">
                    <span class="material-icons-outlined text-lg">security</span>
                    Datele tale sunt protejate și criptate
                </p>
                <p>MoneyShop® - Broker de credite autorizat | FĂRĂ COMISION pentru utilizatori</p>
            </div>
        </div>
    </main>

    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js"></script>
    <script>
        // Set audit metadata
        document.getElementById('userAgent').value = navigator.userAgent;
        document.getElementById('consentTimestamp').value = new Date().toISOString();
        
        // Generate device hash
        function generateDeviceHash() {
            const data = navigator.userAgent + screen.width + screen.height + new Date().getTimezoneOffset();
            let hash = 0;
            for (let i = 0; i < data.length; i++) {
                const char = data.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return Math.abs(hash).toString(16);
        }
        document.getElementById('deviceHash').value = generateDeviceHash();

        let currentStep = 1;

        function goToStep(step) {
            // Validate before proceeding
            if (step > currentStep) {
                if (currentStep === 1 && !validateStep1()) return;
                if (currentStep === 2 && !validateStep2()) return;
            }

            // Update step visibility
            document.getElementById('step1').classList.add('hidden');
            document.getElementById('step2').classList.add('hidden');
            document.getElementById('step3').classList.add('hidden');
            document.getElementById('step' + step).classList.remove('hidden');

            // Update indicators
            for (let i = 1; i <= 3; i++) {
                const indicator = document.getElementById('step' + i + '-indicator');
                indicator.classList.remove('step-active', 'step-complete', 'step-inactive');
                if (i < step) {
                    indicator.classList.add('step-complete');
                    indicator.innerHTML = '<span class="material-icons-outlined text-sm">check</span>';
                } else if (i === step) {
                    indicator.classList.add('step-active');
                    indicator.textContent = i;
                } else {
                    indicator.classList.add('step-inactive');
                    indicator.textContent = i;
                }
            }

            currentStep = step;

            // Update summary if going to step 3
            if (step === 3) {
                updateSummary();
            }

            // Scroll to top
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function validateStep1() {
            const firstName = document.querySelector('[name="FirstName"]').value;
            const lastName = document.querySelector('[name="LastName"]').value;
            const email = document.querySelector('[name="Email"]').value;
            const phone = document.querySelector('[name="Phone"]').value;
            const password = document.querySelector('[name="Password"]').value;
            const confirmPassword = document.querySelector('[name="ConfirmPassword"]').value;

            if (!firstName || !lastName || !email || !phone || !password || !confirmPassword) {
                alert('Te rugăm să completezi toate câmpurile obligatorii.');
                return false;
            }

            if (password.length < 8) {
                alert('Parola trebuie să aibă minim 8 caractere.');
                return false;
            }

            if (password !== confirmPassword) {
                alert('Parolele nu coincid.');
                return false;
            }

            return true;
        }

        function validateStep2() {
            const terms = document.querySelector('[name="AcceptTerms"]').checked;
            const gdpr = document.querySelector('[name="AcceptGdpr"]').checked;
            const costs = document.querySelector('[name="AcceptCosts"]').checked;
            const anaf = document.querySelector('[name="MandateAnaf"]').checked;

            if (!terms || !gdpr || !costs || !anaf) {
                alert('Te rugăm să bifezi toate consimțămintele obligatorii.');
                return false;
            }

            return true;
        }

        function updateConsentCard(type) {
            const cardId = 'card-' + type;
            const card = document.getElementById(cardId);
            const checkbox = card.querySelector('input[type="checkbox"]');
            
            if (checkbox.checked) {
                card.classList.add('checked');
            } else {
                card.classList.remove('checked');
            }

            // Check if all required consents are checked
            const terms = document.querySelector('[name="AcceptTerms"]').checked;
            const gdpr = document.querySelector('[name="AcceptGdpr"]').checked;
            const costs = document.querySelector('[name="AcceptCosts"]').checked;
            const anaf = document.querySelector('[name="MandateAnaf"]').checked;

            const btnToStep3 = document.getElementById('btnToStep3');
            btnToStep3.disabled = !(terms && gdpr && costs && anaf);
        }

        function updateSummary() {
            // Personal data
            const firstName = document.querySelector('[name="FirstName"]').value;
            const lastName = document.querySelector('[name="LastName"]').value;
            const email = document.querySelector('[name="Email"]').value;
            const phone = document.querySelector('[name="Phone"]').value;

            document.getElementById('summary-name').textContent = firstName + ' ' + lastName;
            document.getElementById('summary-email').textContent = email;
            document.getElementById('summary-phone').textContent = phone;

            // Consents
            const consentsHtml = [];
            
            const consents = [
                { name: 'AcceptTerms', label: 'Termeni și Condiții', required: true },
                { name: 'AcceptGdpr', label: 'Politica GDPR', required: true },
                { name: 'AcceptCosts', label: 'Informații Costuri', required: true },
                { name: 'MandateAnaf', label: 'Mandat ANAF (30 zile)', required: true },
                { name: 'MandateBiroCredit', label: 'Mandat Biroul de Credit (30 zile)', required: false },
                { name: 'ShareToBroker', label: 'Transfer date către broker', required: false },
            ];

            consents.forEach(consent => {
                const checked = document.querySelector('[name="' + consent.name + '"]').checked;
                if (checked) {
                    consentsHtml.push(`
                        <div class="flex items-center gap-2 text-sm">
                            <span class="material-icons-outlined text-green-500 text-lg">check_circle</span>
                            <span class="text-gray-900">${consent.label}</span>
                            ${consent.required ? '<span class="text-xs bg-red-100 text-red-700 px-2 py-0.5 rounded">Obligatoriu</span>' : '<span class="text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded">Opțional</span>'}
            </div>
                    `);
                }
            });

            document.getElementById('consents-summary').innerHTML = consentsHtml.join('');
        }

        // Initialize consent cards
        document.querySelectorAll('.consent-card input[type="checkbox"]').forEach(checkbox => {
            if (checkbox.checked) {
                checkbox.closest('.consent-card').classList.add('checked');
            }
        });
    </script>
</body>
</html>
